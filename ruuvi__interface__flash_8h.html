<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ruuvi.drivers.c: src/interfaces/flash/ruuvi_interface_flash.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ruuvi.drivers.c<span id="projectnumber">&#160;${PROJECT_VERSION}</span>
   </div>
   <div id="projectbrief">Drivers for external sensors and peripherals on embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ruuvi__interface__flash_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ruuvi_interface_flash.h File Reference<div class="ingroups"><a class="el" href="group___flash.html">Flash storage.</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Interface functions to persistent flash storage.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ruuvi__driver__enabled__modules_8h_source.html">ruuvi_driver_enabled_modules.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__driver__error_8h_source.html">ruuvi_driver_error.h</a>&quot;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="ruuvi__interface__flash_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa80cc4682372906c8a26fc258d18991f" id="r_gaa80cc4682372906c8a26fc258d18991f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#gaa80cc4682372906c8a26fc258d18991f">RI_FLASH_PAGES</a>&#160;&#160;&#160;(10U)</td></tr>
<tr class="memdesc:gaa80cc4682372906c8a26fc258d18991f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable implementation selected by application.  <br /></td></tr>
<tr class="separator:gaa80cc4682372906c8a26fc258d18991f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga516eae180b07a801905eda73bb64ae95" id="r_ga516eae180b07a801905eda73bb64ae95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga516eae180b07a801905eda73bb64ae95">ri_flash_total_size_get</a> (size_t *size)</td></tr>
<tr class="memdesc:ga516eae180b07a801905eda73bb64ae95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total size of usable flash, excluding any overhead bytes.  <br /></td></tr>
<tr class="separator:ga516eae180b07a801905eda73bb64ae95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga308a556b390b64ed90c7e07915d354f6" id="r_ga308a556b390b64ed90c7e07915d354f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga308a556b390b64ed90c7e07915d354f6">ri_flash_page_size_get</a> (size_t *size)</td></tr>
<tr class="memdesc:ga308a556b390b64ed90c7e07915d354f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get size of usable page, excluding any overhead bytes If returned value is N, a record of N bytes must fit in one page.  <br /></td></tr>
<tr class="separator:ga308a556b390b64ed90c7e07915d354f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa342f23b15e298a41877d4ed64028253" id="r_gaa342f23b15e298a41877d4ed64028253"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#gaa342f23b15e298a41877d4ed64028253">ri_flash_free_size_get</a> (size_t *size)</td></tr>
<tr class="memdesc:gaa342f23b15e298a41877d4ed64028253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total size of free flash.  <br /></td></tr>
<tr class="separator:gaa342f23b15e298a41877d4ed64028253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99b067afb570abea7cb8e196a60b83a1" id="r_ga99b067afb570abea7cb8e196a60b83a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga99b067afb570abea7cb8e196a60b83a1">ri_flash_record_delete</a> (const uint32_t file_id, const uint32_t record_id)</td></tr>
<tr class="memdesc:ga99b067afb570abea7cb8e196a60b83a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a record for deletion.  <br /></td></tr>
<tr class="separator:ga99b067afb570abea7cb8e196a60b83a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95b7379b9938d7f44526176fd2b76ca0" id="r_ga95b7379b9938d7f44526176fd2b76ca0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga95b7379b9938d7f44526176fd2b76ca0">ri_flash_record_set</a> (const uint32_t page_id, const uint32_t record_id, const size_t data_size, const void *const data)</td></tr>
<tr class="memdesc:ga95b7379b9938d7f44526176fd2b76ca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set data to record in page.  <br /></td></tr>
<tr class="separator:ga95b7379b9938d7f44526176fd2b76ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad323839c9db4d0119c12ef04682971f5" id="r_gad323839c9db4d0119c12ef04682971f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#gad323839c9db4d0119c12ef04682971f5">ri_flash_record_get</a> (const uint32_t page_id, const uint32_t record_id, const size_t data_size, void *const data)</td></tr>
<tr class="memdesc:gad323839c9db4d0119c12ef04682971f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get data from record in page.  <br /></td></tr>
<tr class="separator:gad323839c9db4d0119c12ef04682971f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00667c1726806b8cd7d0b6a3b0702833" id="r_ga00667c1726806b8cd7d0b6a3b0702833"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga00667c1726806b8cd7d0b6a3b0702833">ri_flash_gc_run</a> (void)</td></tr>
<tr class="memdesc:ga00667c1726806b8cd7d0b6a3b0702833"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run garbage collection.  <br /></td></tr>
<tr class="separator:ga00667c1726806b8cd7d0b6a3b0702833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga969043b8bd28967636871e50355c7b5d" id="r_ga969043b8bd28967636871e50355c7b5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga969043b8bd28967636871e50355c7b5d">ri_flash_init</a> (void)</td></tr>
<tr class="separator:ga969043b8bd28967636871e50355c7b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga264651219ea727d983bc7ee7d6687fb3" id="r_ga264651219ea727d983bc7ee7d6687fb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga264651219ea727d983bc7ee7d6687fb3">ri_flash_uninit</a> (void)</td></tr>
<tr class="memdesc:ga264651219ea727d983bc7ee7d6687fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unintialize flash. After uninitialization only initialization can be used.  <br /></td></tr>
<tr class="separator:ga264651219ea727d983bc7ee7d6687fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b799a642c06c9ff6189ec7f07c99e0d" id="r_ga6b799a642c06c9ff6189ec7f07c99e0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga6b799a642c06c9ff6189ec7f07c99e0d">ri_flash_purge</a> (void)</td></tr>
<tr class="memdesc:ga6b799a642c06c9ff6189ec7f07c99e0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purge flash.  <br /></td></tr>
<tr class="separator:ga6b799a642c06c9ff6189ec7f07c99e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ec84678abb2177257af40e5a803856e" id="r_ga1ec84678abb2177257af40e5a803856e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#ga1ec84678abb2177257af40e5a803856e">ri_flash_is_busy</a> ()</td></tr>
<tr class="memdesc:ga1ec84678abb2177257af40e5a803856e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if flash is busy.  <br /></td></tr>
<tr class="separator:ga1ec84678abb2177257af40e5a803856e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1f8bb3eb301c75b2e8e899c127711a4" id="r_gad1f8bb3eb301c75b2e8e899c127711a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flash.html#gad1f8bb3eb301c75b2e8e899c127711a4">ri_flash_protect</a> (const size_t page)</td></tr>
<tr class="separator:gad1f8bb3eb301c75b2e8e899c127711a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface functions to persistent flash storage. </p>
<dl class="section author"><dt>Author</dt><dd>Otso Jousimaa <a href="#" onclick="location.href='mai'+'lto:'+'ots'+'o@'+'ojo'+'us'+'ima'+'.n'+'et'; return false;">otso@<span class="obfuscator">.nosp@m.</span>ojou<span class="obfuscator">.nosp@m.</span>sima.<span class="obfuscator">.nosp@m.</span>net</a> </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-12-10 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Ruuvi Innovations Ltd, license BSD-3-Clause. </dd></dl>
<p>Flash is stored to pages which are ideally of same size as the underlying physical write/erase unit. Each page may contain N records. Underlying driver is allowed to arrange pages and records in any manner to implement wear leveling. Underlying driver is allowed to trigger garbage collection on write, which makes runtime of operation undeterministic. </p>

<p class="definition">Definition in file <a class="el" href="ruuvi__interface__flash_8h_source.html">ruuvi_interface_flash.h</a>.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ee3f1a7951c308657a65f8199076c1d6.html">interfaces</a></li><li class="navelem"><a class="el" href="dir_86c6b2d3037ad98df8843100e7fe4572.html">flash</a></li><li class="navelem"><a class="el" href="ruuvi__interface__flash_8h.html">ruuvi_interface_flash.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
