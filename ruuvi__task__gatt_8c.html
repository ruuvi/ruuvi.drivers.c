<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ruuvi.drivers.c: src/tasks/ruuvi_task_gatt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ruuvi.drivers.c<span id="projectnumber">&#160;${PROJECT_VERSION}</span>
   </div>
   <div id="projectbrief">Drivers for external sensors and peripherals on embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ruuvi__task__gatt_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ruuvi_task_gatt.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ruuvi__driver__enabled__modules_8h_source.html">ruuvi_driver_enabled_modules.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__driver__error_8h_source.html">ruuvi_driver_error.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__atomic_8h_source.html">ruuvi_interface_atomic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__communication__ble__advertising_8h_source.html">ruuvi_interface_communication_ble_advertising.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__communication__ble__gatt_8h_source.html">ruuvi_interface_communication_ble_gatt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__communication__radio_8h_source.html">ruuvi_interface_communication_radio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__communication_8h_source.html">ruuvi_interface_communication.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__log_8h_source.html">ruuvi_interface_log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__rtc_8h_source.html">ruuvi_interface_rtc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__interface__scheduler_8h_source.html">ruuvi_interface_scheduler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__task__advertisement_8h_source.html">ruuvi_task_advertisement.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__task__communication_8h_source.html">ruuvi_task_communication.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__task__gatt_8h_source.html">ruuvi_task_gatt.h</a>&quot;</code><br />
</div>
<p><a href="ruuvi__task__gatt_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae834606fa20da277b4a381a5d8416bf7" id="r_ae834606fa20da277b4a381a5d8416bf7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#ae834606fa20da277b4a381a5d8416bf7">rt_gatt_send_asynchronous</a> (<a class="el" href="structri__comm__message__t.html">ri_comm_message_t</a> *const p_msg)</td></tr>
<tr class="memdesc:ae834606fa20da277b4a381a5d8416bf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send given message via NUS.  <br /></td></tr>
<tr class="separator:ae834606fa20da277b4a381a5d8416bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139070929d032682fc71e5c5156d8fd5" id="r_a139070929d032682fc71e5c5156d8fd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a139070929d032682fc71e5c5156d8fd5">rt_gatt_dfu_init</a> (void)</td></tr>
<tr class="memdesc:a139070929d032682fc71e5c5156d8fd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Device Firmware Update service.  <br /></td></tr>
<tr class="separator:a139070929d032682fc71e5c5156d8fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c61cae3c168a51890bf886db5fae7d1" id="r_a5c61cae3c168a51890bf886db5fae7d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a5c61cae3c168a51890bf886db5fae7d1">rt_gatt_dis_init</a> (const <a class="el" href="structri__comm__dis__init__t.html">ri_comm_dis_init_t</a> *const dis)</td></tr>
<tr class="memdesc:a5c61cae3c168a51890bf886db5fae7d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Device Information Update service.  <br /></td></tr>
<tr class="separator:a5c61cae3c168a51890bf886db5fae7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8339ef98c77d9edd51c63d946e1f884" id="r_ac8339ef98c77d9edd51c63d946e1f884"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#ac8339ef98c77d9edd51c63d946e1f884">rt_gatt_nus_init</a> ()</td></tr>
<tr class="memdesc:ac8339ef98c77d9edd51c63d946e1f884"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Nordic UART Service.  <br /></td></tr>
<tr class="separator:ac8339ef98c77d9edd51c63d946e1f884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a623fc835a2308e37eef441a8e48c982e" id="r_a623fc835a2308e37eef441a8e48c982e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a623fc835a2308e37eef441a8e48c982e">rt_gatt_init</a> (const char *const name)</td></tr>
<tr class="memdesc:a623fc835a2308e37eef441a8e48c982e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize GATT. Must be called as a first function in rt_gatt.  <br /></td></tr>
<tr class="separator:a623fc835a2308e37eef441a8e48c982e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399dfbb20b18babceb66896c60b50d8d" id="r_a399dfbb20b18babceb66896c60b50d8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a399dfbb20b18babceb66896c60b50d8d">rt_gatt_adv_enable</a> ()</td></tr>
<tr class="memdesc:a399dfbb20b18babceb66896c60b50d8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start advertising GATT connection to devices.  <br /></td></tr>
<tr class="separator:a399dfbb20b18babceb66896c60b50d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de7fca57eafc33bb73b5f24d3f21076" id="r_a5de7fca57eafc33bb73b5f24d3f21076"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a5de7fca57eafc33bb73b5f24d3f21076">rt_gatt_adv_disable</a> ()</td></tr>
<tr class="memdesc:a5de7fca57eafc33bb73b5f24d3f21076"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop advertising GATT connection to devices.  <br /></td></tr>
<tr class="separator:a5de7fca57eafc33bb73b5f24d3f21076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7050962a92e95b94105f00b80e5ce92d" id="r_a7050962a92e95b94105f00b80e5ce92d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a7050962a92e95b94105f00b80e5ce92d">rt_gatt_is_init</a> ()</td></tr>
<tr class="memdesc:a7050962a92e95b94105f00b80e5ce92d"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if GATT task is initialized  <br /></td></tr>
<tr class="separator:a7050962a92e95b94105f00b80e5ce92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98acfb6062132a9bde61f61910b1f76c" id="r_a98acfb6062132a9bde61f61910b1f76c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a98acfb6062132a9bde61f61910b1f76c">rt_gatt_set_on_connected_isr</a> (const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a> cb)</td></tr>
<tr class="memdesc:a98acfb6062132a9bde61f61910b1f76c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup connection event handler.  <br /></td></tr>
<tr class="separator:a98acfb6062132a9bde61f61910b1f76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c081eb468d6472a7a951317cdd8073" id="r_a23c081eb468d6472a7a951317cdd8073"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a23c081eb468d6472a7a951317cdd8073">rt_gatt_set_on_disconn_isr</a> (const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a> cb)</td></tr>
<tr class="memdesc:a23c081eb468d6472a7a951317cdd8073"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup disconnection event handler.  <br /></td></tr>
<tr class="separator:a23c081eb468d6472a7a951317cdd8073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8a17fd3c98edb3c2ceacb79d0476caa" id="r_ae8a17fd3c98edb3c2ceacb79d0476caa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#ae8a17fd3c98edb3c2ceacb79d0476caa">rt_gatt_set_on_received_isr</a> (const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a> cb)</td></tr>
<tr class="memdesc:ae8a17fd3c98edb3c2ceacb79d0476caa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup data received event handler.  <br /></td></tr>
<tr class="separator:ae8a17fd3c98edb3c2ceacb79d0476caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef72f9f0fdcaffa61926d376eb60de6" id="r_a6ef72f9f0fdcaffa61926d376eb60de6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a6ef72f9f0fdcaffa61926d376eb60de6">rt_gatt_set_on_sent_isr</a> (const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a> cb)</td></tr>
<tr class="memdesc:a6ef72f9f0fdcaffa61926d376eb60de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup data sent event handler.  <br /></td></tr>
<tr class="separator:a6ef72f9f0fdcaffa61926d376eb60de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ef56d0e6f4aca223bf82a344c6b85c1" id="r_a1ef56d0e6f4aca223bf82a344c6b85c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__gatt_8c.html#a1ef56d0e6f4aca223bf82a344c6b85c1">rt_gatt_is_nus_enabled</a> (void)</td></tr>
<tr class="memdesc:a1ef56d0e6f4aca223bf82a344c6b85c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if Nordic UART Service is enabled.  <br /></td></tr>
<tr class="separator:a1ef56d0e6f4aca223bf82a344c6b85c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5de7fca57eafc33bb73b5f24d3f21076" name="a5de7fca57eafc33bb73b5f24d3f21076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5de7fca57eafc33bb73b5f24d3f21076">&#9670;&#160;</a></span>rt_gatt_adv_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_adv_disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop advertising GATT connection to devices. </p>
<p>Calling this function is not enough to stop advertising connection, you must also update advertised data to remove the scan response from data being advertised. This makes sure that advertised data stays valid. This function has not effect if called while already disabled</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if GATT is not initialized. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00406">406</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a399dfbb20b18babceb66896c60b50d8d" name="a399dfbb20b18babceb66896c60b50d8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a399dfbb20b18babceb66896c60b50d8d">&#9670;&#160;</a></span>rt_gatt_adv_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_adv_enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start advertising GATT connection to devices. </p>
<p>Calling this function is not enough to let users to connect, you must also update advertised data to add the scan response to data being advertised. This makes sure that advertised data stays valid. This function has no effect if called while already enabled.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if GATT is not initialized. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00401">401</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a139070929d032682fc71e5c5156d8fd5" name="a139070929d032682fc71e5c5156d8fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a139070929d032682fc71e5c5156d8fd5">&#9670;&#160;</a></span>rt_gatt_dfu_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_dfu_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Device Firmware Update service. </p>
<p>GATT must be initialized before calling this function, and once initialized the DFU service cannot be uninitialized.</p>
<p>Call will return successfully even if the device doesn't have useable bootloader, however program will reboot if user tries to enter bootloader in that case.</p>
<p>To use the DFU service advertisement module must send connectable (and preferably scannable) advertisements.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>GATT was initialized successfully </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>DFU was already initialized or GATT is not initialized </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00381">381</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a5c61cae3c168a51890bf886db5fae7d1" name="a5c61cae3c168a51890bf886db5fae7d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c61cae3c168a51890bf886db5fae7d1">&#9670;&#160;</a></span>rt_gatt_dis_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_dis_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structri__comm__dis__init__t.html">ri_comm_dis_init_t</a> *const&#160;</td>
          <td class="paramname"><em>dis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Device Information Update service. </p>
<p>GATT must be initialized before calling this function, and once initialized the DIS service cannot be uninitialized.</p>
<p>DIS service lets user read basic information, such as firmware version and hardware model over GATT in a standard format.</p>
<p>To use the DIS service advertisement module must send connectable (and preferably scannable) advertisements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dis</td><td>structure containing data to be copied into DIS, can be freed after call finishes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>GATT was initialized successfully </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if given NULL as the information. </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>DIS was already initialized or GATT is not initialized </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00386">386</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a623fc835a2308e37eef441a8e48c982e" name="a623fc835a2308e37eef441a8e48c982e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a623fc835a2308e37eef441a8e48c982e">&#9670;&#160;</a></span>rt_gatt_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_init </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize GATT. Must be called as a first function in rt_gatt. </p>
<p>After calling this function underlying software stack is ready to setup GATT services.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Full name of device to be advertised in scan responses. Maximum 11 chars + trailing NULL. Must not be NULL, 0-length string is valid.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success. </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if name is NULL (use 0-length string instead) </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_LENGTH</td><td>if name is longer than <a class="el" href="group__advertisement__tasks.html#gafced29518d21647a9960e4905bf5260f">SCAN_RSP_NAME_MAX_LEN</a> </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if GATT is already initialized or advertisements are not initialized. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00396">396</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a7050962a92e95b94105f00b80e5ce92d" name="a7050962a92e95b94105f00b80e5ce92d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7050962a92e95b94105f00b80e5ce92d">&#9670;&#160;</a></span>rt_gatt_is_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rt_gatt_is_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check if GATT task is initialized </p>
<dl class="section return"><dt>Returns</dt><dd>true if GATT is initialized, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00411">411</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a1ef56d0e6f4aca223bf82a344c6b85c1" name="a1ef56d0e6f4aca223bf82a344c6b85c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ef56d0e6f4aca223bf82a344c6b85c1">&#9670;&#160;</a></span>rt_gatt_is_nus_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rt_gatt_is_nus_enabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if Nordic UART Service is enabled. </p>
<p>The event handler has signature of </p><div class="fragment"><div class="line">void(*rt_gatt_cb_t)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="section return"><dt>Returns</dt><dd>true if GATT is initialized and ready to accept connection, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00437">437</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="ac8339ef98c77d9edd51c63d946e1f884" name="ac8339ef98c77d9edd51c63d946e1f884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8339ef98c77d9edd51c63d946e1f884">&#9670;&#160;</a></span>rt_gatt_nus_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_nus_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Nordic UART Service. </p>
<p>GATT must be initialized before calling this function, and once initialized the NUS service cannot be uninitialized.</p>
<p>NUS service lets user do bidirectional communication with the application.</p>
<p>To use the NUS service advertisement module must send connectable (and preferably scannable) advertisements.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>GATT was initialized successfully </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if given NULL as the information. </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>DIS was already initialized or GATT is not initialized</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To actually use the data in application, user must setup at least data received callback with <a class="el" href="ruuvi__task__gatt_8c.html#ae8a17fd3c98edb3c2ceacb79d0476caa">rt_gatt_set_on_received_isr</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00391">391</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="ae834606fa20da277b4a381a5d8416bf7" name="ae834606fa20da277b4a381a5d8416bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae834606fa20da277b4a381a5d8416bf7">&#9670;&#160;</a></span>rt_gatt_send_asynchronous()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_send_asynchronous </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structri__comm__message__t.html">ri_comm_message_t</a> *const&#160;</td>
          <td class="paramname"><em>p_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send given message via NUS. </p>
<p>Ruuvi Firmware 3.x GATT tasks.</p>
<p>License: BSD-3 Author: Otso Jousimaa <a href="#" onclick="location.href='mai'+'lto:'+'ots'+'o@'+'ojo'+'us'+'ima'+'.n'+'et'; return false;">otso@<span class="obfuscator">.nosp@m.</span>ojou<span class="obfuscator">.nosp@m.</span>sima.<span class="obfuscator">.nosp@m.</span>net</a> </p>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00375">375</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a98acfb6062132a9bde61f61910b1f76c" name="a98acfb6062132a9bde61f61910b1f76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98acfb6062132a9bde61f61910b1f76c">&#9670;&#160;</a></span>rt_gatt_set_on_connected_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_connected_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup connection event handler. </p>
<p>The event handler has signature of </p><div class="fragment"><div class="line">void(*rt_gatt_cb_t)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on connection in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00416">416</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a23c081eb468d6472a7a951317cdd8073" name="a23c081eb468d6472a7a951317cdd8073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c081eb468d6472a7a951317cdd8073">&#9670;&#160;</a></span>rt_gatt_set_on_disconn_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_disconn_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup disconnection event handler. </p>
<p>The event handler has signature of </p><div class="fragment"><div class="line">void(*rt_gatt_cb_t)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on disconnection in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00422">422</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="ae8a17fd3c98edb3c2ceacb79d0476caa" name="ae8a17fd3c98edb3c2ceacb79d0476caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8a17fd3c98edb3c2ceacb79d0476caa">&#9670;&#160;</a></span>rt_gatt_set_on_received_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_received_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup data received event handler. </p>
<p>The event handler has signature of </p><div class="fragment"><div class="line">void(*rt_gatt_cb_t)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is pointer to raw bytes and event_size is length of received data. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on data received in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00427">427</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
<a id="a6ef72f9f0fdcaffa61926d376eb60de6" name="a6ef72f9f0fdcaffa61926d376eb60de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef72f9f0fdcaffa61926d376eb60de6">&#9670;&#160;</a></span>rt_gatt_set_on_sent_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_sent_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ruuvi__interface__communication_8h.html#a325c0ecf59a546271c4bcccddd2dc781">ri_comm_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup data sent event handler. </p>
<p>The event handler has signature of </p><div class="fragment"><div class="line">void(*rt_gatt_cb_t)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on data sent in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ruuvi__task__gatt_8c_source.html#l00432">432</a> of file <a class="el" href="ruuvi__task__gatt_8c_source.html">ruuvi_task_gatt.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b118c466441e8db851de69c6796245a3.html">tasks</a></li><li class="navelem"><a class="el" href="ruuvi__task__gatt_8c.html">ruuvi_task_gatt.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
