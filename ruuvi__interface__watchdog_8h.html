<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ruuvi.drivers.c: src/interfaces/watchdog/ruuvi_interface_watchdog.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ruuvi.drivers.c
   &#160;<span id="projectnumber">${PROJECT_VERSION}</span>
   </div>
   <div id="projectbrief">Drivers for external sensors and peripherals on embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ruuvi__interface__watchdog_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ruuvi_interface_watchdog.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ruuvi__driver__enabled__modules_8h_source.html">ruuvi_driver_enabled_modules.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ruuvi__driver__error_8h_source.html">ruuvi_driver_error.h</a>&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="ruuvi__interface__watchdog_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a273b6b483bfe3928a3650753af55f735"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__interface__watchdog_8h.html#a273b6b483bfe3928a3650753af55f735">wdt_evt_handler_t</a>) (void)</td></tr>
<tr class="memdesc:a273b6b483bfe3928a3650753af55f735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable implementation selected by application.  <a href="ruuvi__interface__watchdog_8h.html#a273b6b483bfe3928a3650753af55f735">More...</a><br /></td></tr>
<tr class="separator:a273b6b483bfe3928a3650753af55f735"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a06b50711aeb7843919102646d380941c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__interface__watchdog_8h.html#a06b50711aeb7843919102646d380941c">ri_watchdog_init</a> (const uint32_t interval_ms, const <a class="el" href="ruuvi__interface__watchdog_8h.html#a273b6b483bfe3928a3650753af55f735">wdt_evt_handler_t</a> handler)</td></tr>
<tr class="separator:a06b50711aeb7843919102646d380941c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d0a5ca054ccdfff02ebf48c3287013"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__interface__watchdog_8h.html#ab3d0a5ca054ccdfff02ebf48c3287013">ri_watchdog_feed</a> (void)</td></tr>
<tr class="separator:ab3d0a5ca054ccdfff02ebf48c3287013"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Otso Jousimaa <a href="#" onclick="location.href='mai'+'lto:'+'ots'+'o@'+'ojo'+'us'+'ima'+'.n'+'et'; return false;">otso@<span style="display: none;">.nosp@m.</span>ojou<span style="display: none;">.nosp@m.</span>sima.<span style="display: none;">.nosp@m.</span>net</a> </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-01-28 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Ruuvi Innovations Ltd, license BSD-3-Clause.</dd></dl>
<p>Interface for Watchdog basic usage. Typical use:</p>
<div class="fragment"><div class="line"><a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> err_code = <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line">err_code = <a class="code" href="ruuvi__interface__watchdog_8h.html#a06b50711aeb7843919102646d380941c">ri_watchdog_init</a>(WATCHDOG_INTERVAL_MS, on_wdt);</div>
<div class="line"><a class="code" href="group___error.html#ga597c2715360a5ed1d013fa77d950dba2">RD_ERROR_CHECK</a>(err_code, <a class="code" href="group___error.html#gacdcae85c33266a39087cbc858299b5a2">RD_ERROR_SELFTEST</a>);</div>
<div class="line"><span class="keywordflow">while</span>(1)</div>
<div class="line">{</div>
<div class="line">  err_code = do_stuff();</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a> == err_code)</div>
<div class="line">  {</div>
<div class="line">     (void)<a class="code" href="ruuvi__interface__watchdog_8h.html#ab3d0a5ca054ccdfff02ebf48c3287013">ri_watchdog_feed</a>();</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="agroup___error_html_ga3e1919cc1fe75cb7f12af047f6f4ce55"><div class="ttname"><a href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a></div><div class="ttdeci">uint32_t rd_status_t</div><div class="ttdoc">bitfield for representing errors</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00054">ruuvi_driver_error.h:54</a></div></div>
<div class="ttc" id="agroup___error_html_ga597c2715360a5ed1d013fa77d950dba2"><div class="ttname"><a href="group___error.html#ga597c2715360a5ed1d013fa77d950dba2">RD_ERROR_CHECK</a></div><div class="ttdeci">#define RD_ERROR_CHECK(error, mask)</div><div class="ttdoc">Shorthand macro for calling the rd_error_check with current file &amp; line.</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00083">ruuvi_driver_error.h:83</a></div></div>
<div class="ttc" id="agroup___error_html_gaa76220bc977ea62edf556efd7729eaf2"><div class="ttname"><a href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a></div><div class="ttdeci">#define RD_SUCCESS</div><div class="ttdoc">Internal Error.</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00028">ruuvi_driver_error.h:28</a></div></div>
<div class="ttc" id="agroup___error_html_gacdcae85c33266a39087cbc858299b5a2"><div class="ttname"><a href="group___error.html#gacdcae85c33266a39087cbc858299b5a2">RD_ERROR_SELFTEST</a></div><div class="ttdeci">#define RD_ERROR_SELFTEST</div><div class="ttdoc">Self-test fail.</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00046">ruuvi_driver_error.h:46</a></div></div>
<div class="ttc" id="aruuvi__interface__watchdog_8h_html_a06b50711aeb7843919102646d380941c"><div class="ttname"><a href="ruuvi__interface__watchdog_8h.html#a06b50711aeb7843919102646d380941c">ri_watchdog_init</a></div><div class="ttdeci">rd_status_t ri_watchdog_init(const uint32_t interval_ms, const wdt_evt_handler_t handler)</div></div>
<div class="ttc" id="aruuvi__interface__watchdog_8h_html_ab3d0a5ca054ccdfff02ebf48c3287013"><div class="ttname"><a href="ruuvi__interface__watchdog_8h.html#ab3d0a5ca054ccdfff02ebf48c3287013">ri_watchdog_feed</a></div><div class="ttdeci">rd_status_t ri_watchdog_feed(void)</div></div>
</div><!-- fragment --> 
<p class="definition">Definition in file <a class="el" href="ruuvi__interface__watchdog_8h_source.html">ruuvi_interface_watchdog.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a273b6b483bfe3928a3650753af55f735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a273b6b483bfe3928a3650753af55f735">&#9670;&nbsp;</a></span>wdt_evt_handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* wdt_evt_handler_t) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable implementation selected by application. </p>
<p>Watchdog event handler function.</p>
<p>Set up at initialization, gets called on watchdog triggered. </p>

<p class="definition">Definition at line <a class="el" href="ruuvi__interface__watchdog_8h_source.html#l00044">44</a> of file <a class="el" href="ruuvi__interface__watchdog_8h_source.html">ruuvi_interface_watchdog.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab3d0a5ca054ccdfff02ebf48c3287013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3d0a5ca054ccdfff02ebf48c3287013">&#9670;&nbsp;</a></span>ri_watchdog_feed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> ri_watchdog_feed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Feed" the watchdog, resets the watchdog timer. This must be called after watchdog initialization or the program will reset. </p>

</div>
</div>
<a id="a06b50711aeb7843919102646d380941c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06b50711aeb7843919102646d380941c">&#9670;&nbsp;</a></span>ri_watchdog_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> ri_watchdog_init </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>interval_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ruuvi__interface__watchdog_8h.html#a273b6b483bfe3928a3650753af55f735">wdt_evt_handler_t</a>&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes watchdog module. After initialization watchdog must be fed at given interval or the program will reset. There is not way to uninitialize the watchdog. Consider bootloader watchdog interval on setup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interval_ms</td><td>Watchdog will reset program unless fed faster than this. </td></tr>
    <tr><td class="paramname">handler</td><td>Handler for watchdog event.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success, error code on failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ee3f1a7951c308657a65f8199076c1d6.html">interfaces</a></li><li class="navelem"><a class="el" href="dir_fc8303a16d41a01debacedaa4be23cc5.html">watchdog</a></li><li class="navelem"><a class="el" href="ruuvi__interface__watchdog_8h.html">ruuvi_interface_watchdog.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
